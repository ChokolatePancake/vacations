uuid: fc016784-7386-4ce5-811c-e8a723e26d66
langcode: en
status: true
dependencies:
  config:
    - field.field.node.certificate.field_expiration_date
    - field.field.node.certificate.field_starting_days_number
    - field.field.node.certificate.field_user
    - field.field.node.certificate_flow.field_certificate
    - field.field.node.certificate_flow.field_days
    - field.field.node.certificate_flow.field_operation
    - field.field.node.certificate_flow.field_operation_with_days
    - field.field.node.certificate_template.field_expiration_period
    - field.field.node.certificate_template.field_number_of_days
    - field.field.node.vacations.field_approvers
    - field.field.node.vacations.field_date
    - field.field.node.vacations.field_full_days
    - field.field.node.vacations.field_is_approved
    - field.field.user.user.field_available_days
    - field.field.user.user.field_regular_certificate_templa
    - field.storage.node.field_approvers
    - field.storage.node.field_certificate
    - field.storage.node.field_date
    - field.storage.node.field_days
    - field.storage.node.field_expiration_date
    - field.storage.node.field_expiration_period
    - field.storage.node.field_full_days
    - field.storage.node.field_is_approved
    - field.storage.node.field_number_of_days
    - field.storage.node.field_operation
    - field.storage.node.field_operation_with_days
    - field.storage.node.field_starting_days_number
    - field.storage.node.field_user
    - field.storage.user.field_available_days
    - field.storage.user.field_regular_certificate_templa
    - flag.flag.approve
    - node.type.certificate
    - node.type.certificate_flow
    - node.type.vacations
    - views.view.certificates_information
    - views.view.flags
  module:
    - eca_base
    - eca_content
    - eca_queue
    - eca_tamper
    - eca_views
    - user
id: process_d524j1k
modeller: bpmn_io
label: noname
version: ''
weight: 0
events:
  Event_1lp4or2:
    plugin: 'content_entity:insert'
    label: Event_1lp4or2
    configuration:
      type: 'user user'
    successors:
      -
        id: Activity_1iigodt
        condition: ''
  Event_0yekq4q:
    plugin: 'eca_queue:processing_task'
    label: Event_0yekq4q
    configuration:
      distribute: false
      task_name: give_certificate
      task_value: ''
      cron: '60'
    successors:
      -
        id: Activity_1o6mgkq
        condition: Flow_0yq0jwy
  Event_09ycnmd:
    plugin: 'content_entity:insert'
    label: Event_09ycnmd
    configuration:
      type: 'node certificate_flow'
    successors:
      -
        id: Activity_1lo70pw
        condition: ''
  Event_08pkbbv:
    plugin: 'content_entity:insert'
    label: Event_08pkbbv
    configuration:
      type: 'node vacations'
    successors:
      -
        id: Activity_011v1oh
        condition: ''
  Event_0vjqee8:
    plugin: 'content_entity:insert'
    label: Event_0vjqee8
    configuration:
      type: 'node vacations'
    successors:
      -
        id: Activity_0210lgf
        condition: Flow_0t0a63k
  Event_0fgxt6j:
    plugin: 'content_entity:create'
    label: Event_0fgxt6j
    configuration:
      type: 'node vacations'
    successors:
      -
        id: Activity_0oyehfz
        condition: ''
  Event_0tbybkg:
    plugin: 'content_entity:insert'
    label: Event_0tbybkg
    configuration:
      type: 'flagging approve'
    successors:
      -
        id: Activity_1rxxpss
        condition: ''
conditions:
  Flow_0yq0jwy:
    plugin: eca_entity_exists
    configuration:
      negate: false
      unchanged: false
      latest_revision: false
      from: id
      entity_type: user
      entity_id: '[created-user:uid]'
      revision_id: ''
      properties: ''
      langcode: _interface
      entity: created-user
  Flow_1027xb1:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[operation-with-days]'
      right: '0'
      operator: equal
      type: value
      negate: true
  Flow_16b4ebh:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[operation-with-days]'
      right: '0'
      operator: equal
      type: value
  Flow_0t0a63k:
    plugin: eca_entity_field_value
    configuration:
      negate: false
      case: false
      expected_value: '1'
      field_name: field_is_paid
      operator: equal
      type: value
      entity: ''
  Flow_13kh7pz:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[certificate-days]'
      right: '[full-days]'
      operator: atleast
      type: value
  Flow_10zgp9m:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[item-list:field_days:value]'
      right: '0'
      operator: equal
      type: value
      negate: true
  Flow_1weflus:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[certificate-days]'
      right: '[full-days]'
      operator: lessthan
      type: value
  Flow_1fiirzb:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[empty-certificate]'
      right: '[item-list:field_certificate:target_id]'
      operator: equal
      type: value
      negate: true
  Flow_0ybozwb:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[item-list:field_days:value]'
      right: '0'
      operator: equal
      type: value
  Flow_13bi7o1:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[empty-certificate]'
      right: '[item-list:field_certificate:target_id]'
      operator: equal
      type: value
  Flow_03411sf:
    plugin: eca_list_contains
    configuration:
      negate: false
      list_token: approvers
      method: value
      value: '[flag-user]'
  Flow_08nxb9o:
    plugin: eca_count
    configuration:
      negate: false
      case: false
      left: '[approvers]'
      right: '0'
      operator: equal
      type: numeric
gateways: {  }
actions:
  Activity_1rgszo3:
    plugin: eca_enqueue_task_delayed
    label: 'Wait 6 months'
    configuration:
      delay_value: '10'
      delay_unit: '1'
      task_name: give_certificate
      task_value: ''
      tokens: 'created-user, template'
    successors: {  }
  Activity_1o6mgkq:
    plugin: eca_new_entity
    label: 'Create regular certificate'
    configuration:
      token_name: certificate
      type: 'node certificate'
      langcode: _interface
      label: 'Regular certificate'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_12o5wvl
        condition: ''
  Activity_1yd3qbq:
    plugin: eca_set_field_value
    label: 'Set starting number of days in certificate'
    configuration:
      field_name: field_starting_days_number.value
      field_value: '[template:field_number_of_days]'
      method: 'set:empty'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Activity_1tpd9sk
        condition: ''
  Activity_03fxg1u:
    plugin: eca_set_field_value
    label: 'Set expiration for certificate'
    configuration:
      field_name: field_expiration_date.value
      field_value: '[expiration-date]'
      method: 'set:empty'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate
    successors:
      -
        id: Activity_1yd3qbq
        condition: ''
  Activity_18jucyp:
    plugin: eca_set_field_value
    label: 'Put user information to certificate'
    configuration:
      field_name: field_user.target_id
      field_value: '[created-user:uid]'
      method: 'set:empty'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate
    successors:
      -
        id: Activity_0p8pwgo
        condition: ''
  Activity_1iigodt:
    plugin: eca_token_load_entity_ref
    label: "Load user's certificate template"
    configuration:
      field_name_entity_ref: field_regular_certificate_templa
      token_name: template
      from: current
      entity_type: node
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_10ezw9r
        condition: ''
  Activity_10ezw9r:
    plugin: eca_token_load_entity
    label: 'Load user'
    configuration:
      token_name: created-user
      from: current
      entity_type: user
      entity_id: '[user:uid]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_1rgszo3
        condition: ''
  Activity_0f9v5xr:
    plugin: eca_enqueue_task_delayed
    label: 'Wait again'
    configuration:
      delay_value: '10'
      delay_unit: '1'
      task_name: give_certificate
      task_value: ''
      tokens: 'created-user, template'
    successors: {  }
  Activity_12o5wvl:
    plugin: eca_new_entity
    label: 'Create record in flow'
    configuration:
      token_name: certificate-flow
      type: 'node certificate_flow'
      langcode: ''
      label: 'Creating regular certificate'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_18jucyp
        condition: ''
  Activity_1tpd9sk:
    plugin: eca_set_field_value
    label: 'Put certificate to flow'
    configuration:
      field_name: field_certificate.target_id
      field_value: '[certificate:nid]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_1x8u75x
        condition: ''
  Activity_1x8u75x:
    plugin: eca_set_field_value
    label: 'Set operation'
    configuration:
      field_name: field_operation.target_id
      field_value: '1'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_05vtl7d
        condition: ''
  Activity_05vtl7d:
    plugin: eca_set_field_value
    label: 'Set operation with days'
    configuration:
      field_name: field_operation_with_days.value
      field_value: '[template:field_number_of_days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_13jr03y
        condition: ''
  Activity_13jr03y:
    plugin: eca_set_field_value
    label: 'Set days'
    configuration:
      field_name: field_days.value
      field_value: '[template:field_number_of_days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate-flow
    successors:
      -
        id: Activity_0f9v5xr
        condition: ''
  Activity_144qdyn:
    plugin: eca_token_load_entity_ref
    label: 'Load certificate'
    configuration:
      field_name_entity_ref: field_certificate
      token_name: certificate
      from: current
      entity_type: node
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_08qvzji
        condition: ''
  Activity_08qvzji:
    plugin: eca_token_load_entity_ref
    label: 'Load user'
    configuration:
      field_name_entity_ref: field_user
      token_name: certificate-user
      from: current
      entity_type: user
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: certificate
    successors:
      -
        id: Activity_1driwde
        condition: ''
  Activity_1driwde:
    plugin: eca_get_field_value
    label: 'Get available days from user'
    configuration:
      field_name: field_available_days
      token_name: available-days
      object: certificate-user
    successors:
      -
        id: Activity_069nqim
        condition: Flow_1027xb1
      -
        id: Activity_1dp9cir
        condition: Flow_16b4ebh
  Activity_1lo70pw:
    plugin: eca_get_field_value
    label: 'Get operations-with-days from flow'
    configuration:
      field_name: field_operation_with_days
      token_name: operation-with-days
      object: ''
    successors:
      -
        id: Activity_144qdyn
        condition: ''
  Activity_069nqim:
    plugin: 'eca_tamper:math'
    label: 'Sum operations-with-days with available-days'
    configuration:
      operation: addition
      flip: false
      value: '[available-days]'
      eca_data: '[operation-with-days]'
      eca_token_name: current-available-days
    successors:
      -
        id: Activity_104k1js
        condition: ''
  Activity_104k1js:
    plugin: eca_set_field_value
    label: 'Save new available-days value'
    configuration:
      field_name: field_available_days
      field_value: '[current-available-days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate-user
    successors: {  }
  Activity_034m0q8:
    plugin: 'eca_tamper:math'
    label: 'Subtract remaining days when the certificate is burned'
    configuration:
      operation: subtraction
      flip: false
      value: '[remaining-days]'
      eca_data: '[available-days]'
      eca_token_name: current-available-days
    successors:
      -
        id: Activity_104k1js
        condition: ''
  Activity_1dp9cir:
    plugin: eca_get_field_value
    label: 'Load remaining days from flow'
    configuration:
      field_name: field_days
      token_name: remaining-days
      object: ''
    successors:
      -
        id: Activity_034m0q8
        condition: ''
  Activity_0p8pwgo:
    plugin: 'eca_tamper:math'
    label: 'Count expiration time in seconds'
    configuration:
      operation: multiplication
      flip: false
      value: '2629800'
      eca_data: '[template:field_expiration_period:value]'
      eca_token_name: expiration-time
    successors:
      -
        id: Activity_0iblsno
        condition: ''
  Activity_0iblsno:
    plugin: 'eca_tamper:math'
    label: 'Count expiration date'
    configuration:
      operation: addition
      flip: false
      value: '[expiration-time]'
      eca_data: '[current-date:raw]'
      eca_token_name: expiration-date
    successors:
      -
        id: Activity_03fxg1u
        condition: ''
  Activity_0xf6sei:
    plugin: 'eca_tamper:math'
    label: Subdivide
    configuration:
      operation: subtraction
      flip: false
      value: '[value]'
      eca_data: '[end_value]'
      eca_token_name: full_days_unix
    successors:
      -
        id: Activity_0ephzfw
        condition: ''
  Activity_0mq0mys:
    plugin: eca_set_field_value
    label: 'Set days'
    configuration:
      field_name: field_full_days
      field_value: '[full_days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: vacation
    successors: {  }
  Activity_011v1oh:
    plugin: eca_token_load_entity
    label: 'Load vacation'
    configuration:
      token_name: vacation
      from: current
      entity_type: _none
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_0swg1kl
        condition: ''
  Activity_0swg1kl:
    plugin: 'eca_tamper:strtotime'
    label: 'Get start date in UNIX'
    configuration:
      eca_data: '[vacation:field_date:value]'
      eca_token_name: value
    successors:
      -
        id: Activity_1wcwozg
        condition: ''
  Activity_1wcwozg:
    plugin: 'eca_tamper:strtotime'
    label: 'Get end date in UNIX'
    configuration:
      eca_data: '[vacation:field_date:end_value]'
      eca_token_name: end_value
    successors:
      -
        id: Activity_0xf6sei
        condition: ''
  Activity_0ephzfw:
    plugin: 'eca_tamper:math'
    label: 'UNIX to days'
    configuration:
      operation: division
      flip: false
      value: '86400'
      eca_data: '[full_days_unix]'
      eca_token_name: full_days_without_1
    successors:
      -
        id: Activity_1wh2kg4
        condition: ''
  Activity_1wh2kg4:
    plugin: 'eca_tamper:math'
    label: '+1 day'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[full_days_without_1]'
      eca_token_name: full_days
    successors:
      -
        id: Activity_0mq0mys
        condition: ''
  Activity_0vg9uzk:
    plugin: eca_token_load_entity_ref
    label: 'Load user'
    configuration:
      field_name_entity_ref: uid
      token_name: current-user
      from: current
      entity_type: user
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_156bcft
        condition: ''
  Activity_156bcft:
    plugin: eca_views_query
    label: 'Execute query'
    configuration:
      token_name: certificates-list
      view_id: certificates_information
      display_id: default
      arguments: '[current-user:uid]'
    successors:
      -
        id: Activity_1w7g9ev
        condition: ''
  Activity_0210lgf:
    plugin: eca_get_field_value
    label: 'Get number of required days'
    configuration:
      field_name: field_full_days
      token_name: full-days
      object: ''
    successors:
      -
        id: Activity_0vg9uzk
        condition: ''
  Activity_1at16hs:
    plugin: 'eca_tamper:math'
    label: 'Count balance days'
    configuration:
      operation: subtraction
      flip: false
      value: '[full-days]'
      eca_data: '[certificate-days]'
      eca_token_name: balance-days
    successors:
      -
        id: Activity_0oznekq
        condition: ''
  Activity_13k94cl:
    plugin: eca_token_set_value
    label: 'Load certificate available days'
    configuration:
      token_name: certificate-days
      token_value: '[item-list:field_days:value]'
      use_yaml: false
    successors:
      -
        id: Activity_1at16hs
        condition: Flow_13kh7pz
      -
        id: Activity_01cuhc5
        condition: Flow_1weflus
  Activity_0op8nbt:
    plugin: eca_set_field_value
    label: 'Set balance days'
    configuration:
      field_name: field_days
      field_value: '[balance-days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_10e7qhi
        condition: ''
  Activity_1pjj4jr:
    plugin: eca_set_field_value
    label: 'Set operation with days'
    configuration:
      field_name: field_operation_with_days
      field_value: '[oper-days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_1ne4p7y
        condition: ''
  Activity_10e7qhi:
    plugin: 'eca_tamper:math'
    label: 'Calculating operation with days'
    configuration:
      operation: multiplication
      flip: false
      value: '-1'
      eca_data: '[full-days]'
      eca_token_name: oper-days
    successors:
      -
        id: Activity_1pjj4jr
        condition: ''
  Activity_1ne4p7y:
    plugin: eca_set_field_value
    label: 'Set operation "Using"'
    configuration:
      field_name: field_operation.target_id
      field_value: '2'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate-flow
    successors: {  }
  Activity_0oznekq:
    plugin: eca_new_entity
    label: 'Create new certificate flow'
    configuration:
      token_name: certificate-flow
      type: 'node certificate_flow'
      langcode: ''
      label: Using
      published: true
      owner: '1'
    successors:
      -
        id: Activity_0apdul0
        condition: ''
  Activity_0apdul0:
    plugin: eca_set_field_value
    label: 'Set certificate id'
    configuration:
      field_name: field_certificate
      field_value: '[certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_0op8nbt
        condition: ''
  Activity_1nbpk7u:
    plugin: eca_token_load_entity
    label: 'Load certificate'
    configuration:
      token_name: certificate
      from: id
      entity_type: node
      entity_id: '[item-list:field_certificate:target_id]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_13k94cl
        condition: Flow_10zgp9m
      -
        id: Activity_11etmyq
        condition: Flow_0ybozwb
  Activity_1upv4hy:
    plugin: eca_new_entity
    label: 'Create new certificate flow'
    configuration:
      token_name: certificate-flow
      type: 'node certificate_flow'
      langcode: ''
      label: Using
      published: true
      owner: '1'
    successors:
      -
        id: Activity_0md9x5o
        condition: ''
  Activity_0md9x5o:
    plugin: eca_set_field_value
    label: 'Set certificate id'
    configuration:
      field_name: field_certificate
      field_value: '[certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_051g6ky
        condition: ''
  Activity_01cuhc5:
    plugin: 'eca_tamper:math'
    label: 'Get remaining uncovered days'
    configuration:
      operation: subtraction
      flip: false
      value: '[certificate-days]'
      eca_data: '[full-days]'
      eca_token_name: full-days
    successors:
      -
        id: Activity_1upv4hy
        condition: ''
  Activity_051g6ky:
    plugin: 'eca_tamper:math'
    label: 'Calculating operation with days'
    configuration:
      operation: multiplication
      flip: false
      value: '-1'
      eca_data: '[certificate-days]'
      eca_token_name: oper-days
    successors:
      -
        id: Activity_1to36jl
        condition: ''
  Activity_1to36jl:
    plugin: eca_set_field_value
    label: 'Set field days to 0'
    configuration:
      field_name: field_days
      field_value: '0'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_0fced9v
        condition: ''
  Activity_0fced9v:
    plugin: eca_set_field_value
    label: 'Set operation with days'
    configuration:
      field_name: field_operation_with_days
      field_value: '[oper-days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: certificate-flow
    successors:
      -
        id: Activity_0kyi6q7
        condition: ''
  Activity_0kyi6q7:
    plugin: eca_set_field_value
    label: 'Set operation "Using"'
    configuration:
      field_name: field_operation.target_id
      field_value: '2'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate-flow
    successors:
      -
        id: Activity_1ib0z07
        condition: ''
  Activity_1w7g9ev:
    plugin: eca_list_remove
    label: 'Pop first certificate flow info'
    configuration:
      value: ''
      token_name: item-list
      method: index
      index: '0'
      list_token: certificates-list
    successors:
      -
        id: Activity_1nbpk7u
        condition: Flow_1fiirzb
      -
        id: Activity_1w7g9ev
        condition: Flow_13bi7o1
  Activity_11etmyq:
    plugin: eca_token_set_value
    label: 'If certificate empty save id in token and avoid it'
    configuration:
      token_name: empty-certificate
      token_value: '[item-list:field_certificate:target_id]'
      use_yaml: false
    successors:
      -
        id: Activity_1w7g9ev
        condition: ''
  Activity_1ib0z07:
    plugin: eca_token_set_value
    label: 'Create token with empty certificate id to avoid it in next circle'
    configuration:
      token_name: empty-certificate
      token_value: '[item-list:field_certificate:target_id]'
      use_yaml: false
    successors:
      -
        id: Activity_1w7g9ev
        condition: ''
  Activity_0oyehfz:
    plugin: eca_token_load_entity_ref
    label: 'Load author'
    configuration:
      field_name_entity_ref: uid
      token_name: Author
      from: current
      entity_type: _none
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_0gg4cj4
        condition: ''
  Activity_0gg4cj4:
    plugin: eca_set_field_value
    label: 'Set title "Author''s vacation reques"'
    configuration:
      field_name: title
      field_value: "[author:name]'s vacation reques"
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: ''
    successors: {  }
  Activity_1rxxpss:
    plugin: eca_get_field_value
    label: 'Get vacation id'
    configuration:
      field_name: entity_id
      token_name: entity-id
      object: ''
    successors:
      -
        id: Activity_0kjbqpz
        condition: ''
  Activity_0kjbqpz:
    plugin: eca_token_load_entity
    label: 'Load vacation'
    configuration:
      token_name: vacation
      from: id
      entity_type: node
      entity_id: '[entity-id]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_0ayrcgz
        condition: ''
  Activity_0ayrcgz:
    plugin: eca_views_query
    label: 'Execute query of all people, who flagged this vacation'
    configuration:
      token_name: flags-list
      view_id: flags
      display_id: default
      arguments: '[entity-id]'
    successors:
      -
        id: Activity_0vssfkd
        condition: ''
  Activity_0vssfkd:
    plugin: eca_get_field_value
    label: 'Get required approvers'
    configuration:
      field_name: field_approvers
      token_name: approvers
      object: vacation
    successors:
      -
        id: Activity_1amwtd6
        condition: ''
  Activity_1amwtd6:
    plugin: eca_list_remove
    label: "Pop\_ person who flagged"
    configuration:
      value: ''
      token_name: flag-id
      method: first
      index: ''
      list_token: flags-list
    successors:
      -
        id: Activity_1mbu8pl
        condition: ''
  Activity_0j10zjg:
    plugin: eca_list_remove
    label: 'Remove person from required approvers'
    configuration:
      value: '[flag-user]'
      token_name: ''
      method: value
      index: ''
      list_token: approvers
    successors:
      -
        id: Activity_1amwtd6
        condition: ''
  Activity_0fu4ahq:
    plugin: eca_token_load_entity
    label: 'Load person'
    configuration:
      token_name: flag-user
      from: id
      entity_type: user
      entity_id: '[user-id]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_0j10zjg
        condition: Flow_03411sf
      -
        id: Activity_0qojc64
        condition: Flow_08nxb9o
  Activity_1mbu8pl:
    plugin: eca_get_field_value
    label: 'Get id of person'
    configuration:
      field_name: 'uid:target_id'
      token_name: user-id
      object: flag-id
    successors:
      -
        id: Activity_0fu4ahq
        condition: ''
  Activity_0qojc64:
    plugin: eca_set_field_value
    label: 'Set status approved'
    configuration:
      field_name: field_is_approved
      field_value: '1'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: vacation
    successors: {  }
